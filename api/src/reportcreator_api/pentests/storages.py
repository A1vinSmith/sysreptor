from urllib.parse import urljoin
from django.conf import settings
from django.utils.module_loading import import_string

from reportcreator_api.utils.storages import FileSystemOverwriteStorage


class UploadedImageFileSystemStorage(FileSystemOverwriteStorage):
    def __init__(self) -> None:
        super().__init__(location=settings.UPLOADED_IMAGE_LOCATION, base_url=urljoin(settings.MEDIA_URL, 'uploadedimages'))


class UploadedAssetFileSystemStorage(FileSystemOverwriteStorage):
    def __init__(self) -> None:
        super().__init__(location=settings.UPLOADED_ASSET_LOCATION, base_url=urljoin(settings.MEDIA_URL, 'uploadedassets'))


def get_uploaded_image_storage():
    return import_string(settings.UPLOADED_IMAGE_STORAGE)()


def get_uploaded_asset_storage():
    return import_string(settings.UPLOADED_ASSET_STORAGE)()
